#!/usr/bin/env python\n\"\"\"\nPhase 3 Simple Verification Script\n\"\"\"\n\nimport os\nimport sys\n\n# Add the backend directory to Python path\nsys.path.insert(0, os.path.dirname(os.path.abspath(__file__)))\n\n# Setup Django\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'backend.settings')\n\ntry:\n    import django\n    django.setup()\n    print(\"Django setup successful\")\nexcept Exception as e:\n    print(f\"Django setup failed: {e}\")\n    sys.exit(1)\n\ndef test_file_existence():\n    \"\"\"Test that all Phase 3 files exist\"\"\"\n    print(\"\\n=== Testing File Existence ===\")\n    \n    files_to_check = [\n        'tasks/comprehensive_async_tasks.py',\n        'admin_tools/task_monitoring_views.py',\n        'vessels/frontend_serializers.py',\n        'vessels/frontend_cleanup_views.py',\n        'vessels/websocket_audit_views.py'\n    ]\n    \n    all_exist = True\n    for file_path in files_to_check:\n        if os.path.exists(file_path):\n            print(f\"[OK] {file_path} exists\")\n        else:\n            print(f\"[FAIL] {file_path} missing\")\n            all_exist = False\n    \n    return all_exist\n\ndef test_imports():\n    \"\"\"Test that key imports work\"\"\"\n    print(\"\\n=== Testing Imports ===\")\n    \n    try:\n        # Test async tasks\n        from tasks.comprehensive_async_tasks import (\n            fetch_weather_data_comprehensive_task,\n            sync_port_analytics_data_task\n        )\n        print(\"[OK] Comprehensive async tasks import\")\n        \n        # Test monitoring views\n        from admin_tools.task_monitoring_views import TaskStatusView\n        print(\"[OK] Task monitoring views import\")\n        \n        # Test frontend serializers\n        from vessels.frontend_serializers import VesselMapDisplaySerializer\n        print(\"[OK] Frontend serializers import\")\n        \n        # Test cleanup views\n        from vessels.frontend_cleanup_views import FormattedLiveVesselsView\n        print(\"[OK] Frontend cleanup views import\")\n        \n        # Test WebSocket audit\n        from vessels.websocket_audit_views import WebSocketBoundaryAuditView\n        print(\"[OK] WebSocket audit views import\")\n        \n        return True\n    except Exception as e:\n        print(f\"[FAIL] Import test failed: {e}\")\n        return False\n\ndef test_basic_functionality():\n    \"\"\"Test basic functionality\"\"\"\n    print(\"\\n=== Testing Basic Functionality ===\")\n    \n    try:\n        # Test mock vessel generation\n        from vessels.frontend_serializers import MockVesselSerializer\n        mock_vessels = MockVesselSerializer.generate_mock_vessels(3)\n        \n        if len(mock_vessels) == 3:\n            print(\"[OK] Mock vessel generation works\")\n        else:\n            print(f\"[WARN] Expected 3 vessels, got {len(mock_vessels)}\")\n        \n        # Test cache operations\n        from django.core.cache import cache\n        test_key = \"phase3_test\"\n        cache.set(test_key, \"test_value\", 60)\n        cached_value = cache.get(test_key)\n        \n        if cached_value == \"test_value\":\n            print(\"[OK] Cache operations work\")\n        else:\n            print(\"[FAIL] Cache operations failed\")\n        \n        cache.delete(test_key)\n        \n        return True\n    except Exception as e:\n        print(f\"[FAIL] Basic functionality test failed: {e}\")\n        return False\n\ndef main():\n    \"\"\"Run Phase 3 verification\"\"\"\n    print(\"Phase 3 Simple Verification\")\n    print(\"=\" * 50)\n    \n    tests = [\n        test_file_existence,\n        test_imports,\n        test_basic_functionality\n    ]\n    \n    results = []\n    for test in tests:\n        try:\n            result = test()\n            results.append(result)\n        except Exception as e:\n            print(f\"[FAIL] Test {test.__name__} crashed: {e}\")\n            results.append(False)\n    \n    print(\"\\n\" + \"=\" * 50)\n    print(\"VERIFICATION SUMMARY\")\n    print(\"=\" * 50)\n    \n    passed = sum(results)\n    total = len(results)\n    \n    if passed == total:\n        print(f\"ALL TESTS PASSED ({passed}/{total})\")\n        print(\"Phase 3 files and imports are working!\")\n    else:\n        print(f\"SOME TESTS FAILED ({passed}/{total})\")\n    \n    print(\"\\nPhase 3 Components Created:\")\n    print(\"• Comprehensive async tasks\")\n    print(\"• Task monitoring endpoints\")\n    print(\"• Frontend cleanup serializers and views\")\n    print(\"• WebSocket boundary enforcement\")\n    print(\"• WebSocket audit system\")\n\nif __name__ == \"__main__\":\n    main()